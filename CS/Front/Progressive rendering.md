## Progressive rendering

점진적 렌더링(progressive rendering)은 서버에서 웹 페이지의 일부를 순차적으로 렌더링하고 전체 페이지가 렌더링될 때까지 기다리지 않고, 부분적으로 클라이언트에 스트리밍하는 기술이다.
이 방법은 로딩 시간을 줄이고 사용자가 페이지의 가장 중요한 요소와 더 빠르게 상호작용할 수 있도록 하여 사용자 경험을 크게 향상시킨다.

PR (Progressive Rendering)은 서버에서 중요한 컨텐츠를 렌더링한 후, 중요하지 않은 콘텐츠를 기다리지 않고 클라이언트로 스트리밍하는 기술이다.

그런 다음 서버에서 렌더링되면 나중에 중요하지 않은 콘텐츠를 스트리밍한다. 브라우저는 중요한 콘텐츠에 대한 chunk가 수신되는 즉시 페이지에서 HTML을 점진적으로 렌더링하기 시작한다. 그리고 브라우저가 수신할 때 중요하지 않은 콘텐츠는 나중에 페이지에서 렌더링된다.

<br />

### 동작 과정

1. 브라우저가 서버에 HTML 요청
2. 서버에서 API request 생성 후, 중요 콘텐츠를 우선 렌더링하고 브라우저로 스트리밍
3. 브라우저는 HTML 청크 로드 후 렌더링
4. 서버에서 중요하지 않은 컨텐츠를 렌더링하여 클라이언트로 스트리밍
5. 브라우저는 나중에 중요하지 않은 컨텐츠를 수신하고 렌더링
6. 전체 페이지 로드 후, 브라우저는 일반적으로 이벤트 핸들러 및 기타 상호작용 동작을 연결하는 DOM element에 대한 상호 작용 수행

PR은 CSR과 SSR의 이점을 연결한다. API는 서버에 함께 있기 때문에 컨텐츠가 빠르게 렌더링되는 동시에, 덜 중요한 컨텐츠를 기다리지 않고 중요 콘텐츠를 빠르게 렌더링할 수 있다.

PR을 사용하면 JavaScript를 사용하여 컨텐츠를 로드하지 않고도 비동기식으로 사이트를 더 빠르게 로드힐 수 있다.

<br />

## 우선 순위 부여

웹 페이지의 구성 요소에 우선순위를 부여하여 우선 렌더링을 결정한다.

구성 요소의 우선순위는 뷰포트에 따라 달라진다. 즉, 처음으로 웹 사이트를 로드한 후 뷰포트에 들어오는 구성 요소는 높은 우선 순위를 갖고 해당 뷰포트 아래에 있는 구성 요소는 낮은 우선 순위를 받아야 한다.

<br />

## CSR

클라리언트 측 렌더링에서는 콘텐츠가 클라이언트 측에서 렌더링된다.

여기서 사용자가 웹페이지를 방문하면 HTML 및 CSS 파일을 가져오도록 요청한 후 서버가 HTML 및 CSS 파일을 클라이언트 측으로 보낸다. 해당 코드를 처리한 후 JS 파일을 가져오라는 요청이 이루어지며 JS 파일이 로드되지 않을 때까지 HTML과 CSS는 브라우저에 표시되지 않는다.

따라서 JS 파일이 로드되지 않을 때까지 사용자에게는 빈 페이지가 표시된다.

<br />

## SSR

서버 측 렌더링에서는 콘텐츠가 먼저 서버 측에서 렌더링된 다음 클라이언트 측으로 전송된다.

여기서 사용자가 방문하여 우베페이지를 가져오도록 요청하면 서버는 먼저 HTML 및 CSS 파일을 자체적으로 로드한 다음 이를 처리한 결과 웹페이지를 클라이언트 측으로 보낸다. 해당 웹페이지를 얻은 후 사용자는 웹페이지를 볼 수 있으며 브라우저는 JS 파일이 로드될 때까지 기다린다.

JS 파일이 로드되지 않을 때까지 사용자는 웹페이지를 볼 수만 있고 상호작용할 수는 없다.

웹페이지와의 상호작용은 JS를 통해서만 가능하다.

<br />

## 프로그레시브 렌더링의 이점

1. 웹사이트의 로드 시간을 개선하고 더 나은 사용자 경험으로 이어진다.
2. 중요한 렌더링 경로를 최적화한다. 주요 렌더링 경로는 HTML, CSS, Javascript 코드를 수신하여 시각적 웹페이지로 변화하는 단계를 말한다.
3. 서버 측 렌더링과 클라이언트 측 렌더링의 단점을 극복하는 데 도움이 된다.

4. 이미지의 지연 로딩
   이미지의 지연 로딩은 처음에 모든 이미지를 한 번에 로드하는 대신 이미지가 뷰포트에 들어오려고 할 때 이미지를 로드하는 것을 말한다. 처음에 뷰포트에 포함된 이미지가 우선순위가 높고, 곧 뷰포트에 들어오고 로드될 이미지는 낮은 우선순위를 갖는다.

next.js의 스트리밍 기능이 프로그레시브 렌더링에 해당된다.
