## 스켈레톤 UI란

데이터를 가져오는 등 비동기 처리 과정에서 콘텐츠를 보여주는 컴포넌트를 말한다.

<br />

## 스켈레톤의 장점

사용자가 서비스를 이용하는 동안 콘텐츠의 로딩을 기다리면서 하얀 백지 화면만 보게 된다면, 지루함을 느낄 것이고 로딩하는 데 상당 시간이 소요될 경우 ‘페이지가 멈췄나?’라는 생각을 가질 수 있을 것이다.

이를 방지하기 위해 스켈레톤 컴포넌트를 보여줌으로써 사용자에게 서비스가 원활히 작동중임을 알리고, 이탈을 방지하는 효과를 얻을 수 있다.

<br />

## 스켈레톤 사용

로딩 상황에 사용자에게 정적인 화면을 보여주는 대신 스켈레톤 애니메이션을 화면에 보여줌으로써 사용자의 요청이 진행중임을 표시한다.

하지만 빠른 인터넷 속도와 Progress Indicator가 만나면 스켈레톤이 화면에 보여지는 시간이 너무 짧기 때문에 오히려 덜그럭거리는 느낌을 받을 수 있다.

그렇기에 API 응답시간이 짧은 경우에는 스켈레톤이 보여지지 않게끔하는 기능을 넣어주면 오히려 더 좋은 사용자 경험을 줄 수 있다.

<br />

## 요청 응답 시간에 따른 스켈레톤 적용

로딩이 시작된 후 특정 시점까지는 스켈레톤을 보여주지 않도록 해준다.

```jsx
const DeferredComponent = ({ children }: PropsWithChildren<{}>) => {
  const [isDeferred, setIsDeferred] = useState(false);

  useEffect(() => {
    // 200ms 지난 후 children Render
    const timeoutId = setTimeout(() => {
      setIsDeferred(true);
    }, 200);
    return () => clearTimeout(timeoutId);
  }, []);

  if (!isDeferred) {
    return null;
  }

  return <>{children}</>;
};
```

```jsx
// ...전략
<Route exact path={ROUTE.CATEGORY_LIST}>
  <Suspense
    fallback={
      <DeferredComponent>
        <HomeSkeleton />
      </DeferredComponent>
    }
  >
    <CategoryList />
  </Suspense>
</Route>
// ...후략
```

DefferedComponent 내부의 지연 시간을 200ms로 잡았기 때문에, 응답 지연이 100ms인 경우에는 스켈레톤을 보여주는 대신 사용자에게 잠시 빈 화면이 노출된 뒤 화면에 제공된다.

응답 지연이 1000ms인 경우에는 200ms 동안은 빈 화면이 뜨고 나머지 800ms 동안 스켈레톤이 노출된다.

물론 이렇게 지연 시간을 설정한 경우에도 덜그럭 거리는 스켈레톤 뷰를 완벽히 피할수는 없다.

예컨대 200ms까지 스켈레톤을 보여주지 않게끔 설정한 화면이 있다고 가정했을 때, 만약 사용자에게 API 응답이 250ms, 300ms만에 도착했다면 50~100ms동안 노출될 스켈레톤이 사용자에게 똑같이 덜그런 거리는 느낌을 주게 될 것이다.

성능 지표를 확인하여 일반적으로 사람들이 API 응답 시간이 어느정도 되는지를 확인한 후 적절한 시간을 지연 시간으로 잡으면 더 자연스러운 사용자 경험을 제공할 수 있을 것이다.

프론트엔드 서비스는 그 특성상 모든 사용자의 환경에서 동일한 경험을 제공하기 어렵다.

그러나 사용자 경험에 대한 연구들을 통해 다양한 인사이트를 얻고, 데이터를 활용한 가설 수립 및 검증 과정을 지속적으로 진행한다면 많은 사용자에게 동일하지는 않아도 더 좋은 사용자 경험을 제공할 수 있을 것이다.
