## 릴레이션

릴레이션이란 관계형 데이터베이스에서 정보를 구분하여 저장하는 기본 단위이다.

결국, 릴레이션은 DB 테이블이다.

하나의 릴레이션은 현실세계의 어떤 `개체(entity)`를 표현하고 저장하는데 사용된다. 이때 개체는 사물이 될 수도 추상적인 개념이 될 수도 있다.

<br />

### 릴레이션 특징

- 한 애트리뷰트(속성) 내의 값들은 모두 같은 유형
- 애트리뷰트들의 순서는 중요하지 않음
- 튜플들의 순서는 중요하지 않음
- 동일한 튜플이 두 개 이상 존재하지 않음 → 키가 존재
- 한 튜플의 각 애트리뷰트는 원자 값을 가짐

<br />

### 속성(Attribute)

속성은 내가 저장하고 싶은 개체의 항목들이다.
하나의 열은 하나의 속성 정보를 표시한다.
속성 또한 고유한 이름을 가지고 있어, 동일 릴레이션 내에서는 같은 이름의 속성이 존재할 수 없다.

<br />

### 차수(Degree)

한 릴레이션 안에 있는 `속성의 수`를 차수라고 한다.
따라서 유효한 릴레이션의 최소 차수는 1이다.
위의 학생 테이블에서 차수는 5이다.

<br />

### 튜플(tuple, 레코드)

`릴레이션의 각 행`을 레코드라고 한다.

<br />

### 카디날리티(Cardinality)

릴레이션 `튜플의 개수`이다.
아직 데이터가 삽입되지 않은 테이블의 경우 카디널리티는 차수와 다르게 0의 값을 가질 수 있다.

또한, 카디날리티는 시간이 지남에 따라 값이 계속해서 변화한다.
위의 학생 테이블에서 카디날리티는 4이다.

<br />

### 도메인(domain)

도메인은 릴레이션에 포함된 속성들이 각각 가질 수 있는 `값들의 집합`이다.

예를 들어 “안경 착용 유무”라는 속성이 있을 때 이 속성이 가질 수 있는 값들이 “유”, “무”라면, 이 집합, 즉 도메인의 이름을 ‘A’라고 할 때 “안경 착용 우무”라는 속성은 A라는 도메인에 있는 값만 가질 수 있다.

도메인의 이름은 속성 이름과 같을 수도, 다를 수도 있다.
또 하나의 도메인을 여러 속성에서 공유할 수도 있다.

<br />

### 스키마(Scheme)

스키마는 데이터베이스의 구조와 제약 조건에 관한 전반적인 명세를 기술한 `메타데이터의 집`합이다.

스키마는 데이터베이스를 구성하는 데이터 개체, 속성, 관계 및 데이터 조작 시 데이터 값들이 갖는 제약 조건 등에 관해 전반적으로 정의한다.

스키마는 사용자의 관점에 따라 외부 스키마, 개념 스키마, 내부 스키마로 나눠진다.

- `개념스키마`
  조직체 전체를 관장하는 입장에서 DB를 정의한 것
  데이터 베이스에 실제로 어떤 데이터가 저장되었으며, 데이터간의 관계는 어떻게 되는가
  데이터 베이스당 하나만 존재
- `내부 스키마`
  `물리적인 저장장치 입장`에서 DB가 저장되는 방법을 기술한 것
  개념 스키마를 디스크 기억장치에 물리적으로 구현하기 위한 방법을 기술한 것
- `외부 스키마`
  사용자나 응용 프로그래머가 개인의 입장에서 필요한 데이터베이스의 `논리적 구조`를 정의
  일반 사용자는 질의어를 이용해 DB를 쉽게 사용

<br />

## 키

데이터베이스에서 튜플을 구분하기 위한 속성 또는 `속성의 집합`을 의미한다.

- 유일성: 하나의 키 값으로 튜플을 식별할 수 있는 특성
- 최소성: 튜플을 식별하는 데 필요한 최소한의 속성만으로 이루어져 있는 특성

<br />

### DBMS (데이터베이스 관리 시스템)

- 슈퍼 키: 튜플을 식별할 수 있어서 `유일성`은 만족하지만, 후보 키와 달리 `최소성`을 만족하지 않아도 된다.
- 후보 키: 튜플을 식별할 수 있는 유일성과 필요한 속성만으로 구성되는 최소성을 만족해야 한다.
- 기본 키: 후보 키 중에서 메인이 되는 키로 NULL 값을 가지면 안된다.
  후보키들 중에서 하나를 선택한 키로 최소성과 유일성을 만족한다.
- 대체 키: 후보 키 중 기본 키를 제외한 키
  후보키가 두개 이상일 경우 그 중에서 어느 하나를 기본키로 지정하고 남은 후보키들을 말한다.
- 외래 키: 다른 테이블의 기본 키를 참조하는 키로, 다른 테이블의 데이터를 참조할 때 없는 값을 참조할 수 없도록 제약을 주는 것이다.

<br />

## 무결성

데이터베이스에 저장된 데이터와 실제 데이터가 일치하는 `정확성`과, 데이터가 일정하게 유지되는 `일관성`을 의미한다.

DBMS는 데이터베이스를 조작하고 제어해 데이터의 무결성을 유지하는 기능을 한다.

- 개체 무결성
  모든 테이블이 기본 키를 가져야 한다.
- 도메인 무결성
  테이블의 속성 값은 도메인에 속해야 한다. `도메인`은 속성이 가질 수 있는 값의 집합을 의미한다.
- 참조 무결성
  외래 키의 값은 참조하는 테이블의 기본 키 값과 동일하거나 NULL 이어야 한다.

<br />

## 인덱스

데이터베이스에서 튜플의 검색 성능을 높이기 위해 속성 값과 튜플이 저장된 주소를 저장하는 것을 말한다.

키-값 형태로 ‘`속성 값-튜플 주소`’를 `인덱스 테이블`에 저장하고, 속성 값을 기준으로 정렬 상태를 유지한다.

<br />

- 장점: 인덱스 테이블에 데이터가 정렬되어 있어서 검색 속도가 빠르다.
- 단점
  인덱스 테이블을 저장하기 위한 추가 공간이 필요하다.
  정렬된 상태를 유지하기 위해 데이터를 추가, 수정, 삭제하는 경우에는 속도가 느리다.

튜플의 삭제 연산이 발생하는 경우 인덱스 테이블에서 데이터는 ‘사용하지 않음’ 처리가 되지만, 실제로 삭제되지 않고 테이블에 남아 있다.

즉, 삭제 연산이 빈번하게 일어나면 인덱스 테이블 크기는 일정하지만, 실제로 사용하는 데이터는 적어서 성능이 저하될 수 있다.

따라서 데이터 양이 방대하며 데이터 변경보다는 검색을 자주하는 경우에 인덱스를 사용하는 것이 좋다.

<br />

### 해시 테이블 인덱스

속성 값으로 해시 값을 계산해 인덱싱하는 방법이다.

해시 함수의 특성상 속성 값을 그대로 검색해야 해서 검색하려는 값을 온전히 입력할 때만 사용할 수 있다.

그래서 속도가 빠른데도 자주 사용하지 않는 방식이다.

<br />

### B+- 트리 인덱스

B는 `Balanced`를 의미한다.

B+ 트리는 단말 노드에만 데이터를 저장하고 단말 노드 간에는 연결 리스트로 연결되는 방식이다.

B- 트리는 모든 노드에 데이터가 저장되는 방식이다.

<br/>

B+ 트리 인덱스나 B- 트리 인덱스를 사용하면 데이터의 삽입, 갱신, 삭제 등에 드는 작업 비용을 줄일 수 있다.

또한, 해시 테이블 인덱스와 달리 속성을 범위로 검색할 수 있어서 검색하고자 하는 값의 일부만을 가지고 인덱스를 찾는 것이 가능하다.

## ORM

객체와 관계형 데이터베이스를 매핑하는 도구를 의미한다.

데이터베이스를 프로그래밍 언어의 객체 관점으로 바라볼 수 있어서 객체 지향 프로그래밍 언어를 이용해 프로그램을 개발할 때 편리하다.

SQL 문을 사용하지 않고 객체 지향적 코드를 작성할 수 있어서 코드의 가독성을 높이고 개발자 편의성을 증대할 수 있다.
